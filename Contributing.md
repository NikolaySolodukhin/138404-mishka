# Руководство по внесению изменений

Поддерживайте ваш репозиторий обновлённым. Когда наставник принимает ваш пулреквест, он попадает в репозиторий Академии, но не в ваш форк.

#### 1. Не коммитьте ничего самостоятельно в `master` вашего репозитория

Это помешает вам аккуратно обновлять ваш репозиторий, могут возникнуть конфликты.

#### 2. Прежде чем приступать к новому заданию, обновите `master`

Обновить свой репозиторий из репозитория Академии можно так:

```
# В вашей локальной копии переключитесь в ветку master
git checkout master

# Заберите изменения из репозитория Академии¹
git pull academy master

# Отправьте изменения в ваш форк на Гитхабе
git push
```

¹ В `academy` должна быть ссылка на репозиторий Академии. Если его там нет, добавьте:

```
git remote add academy git@github.com:htmlacademy-adaptive/138404-mishka.git
```

Когда вы обновили `master`, создайте ветку для нового задания:

```
git checkout -b module2-task1
```

`module2-task1` — это название ветки. Под описанием каждого задания в интерфейсе интенсива для вас будет указано правильное название ветки.

--

#### Есть вопрос?

Посмотрите [коллекцию часто задаваемых вопросов по Git](http://firstaidgit.ru).



1. Переносим файл `service-worker.js` из папки assets на уровень выше (в директорию `entrance-task-3`). Делаем, для того чтобы не ограничивать `scope`    сервис-воркера (Максимальный scope `service-worker`а это его location) Соответственно, теперь он сможет обрабатывать все запросы нашего сайта.

2. Будем использовать стадию установки `service-worker`а для предварительно кеширования ресурсов сайта в том числе и `gifs.html`. Теперь пока не выполнится `event.waitUntil(promise)` (не закешируются все ресурсы), событие `install` (`service-worker`а) не завершится. Однако, если хотя бы один из ресурсов не закешируется, `service-worker` не установится. Благодаря `clients.claim()` на этапе активации `service-worker`а, мы сможем обеспечить переход в офлайн режим после первого же запроса. 

3. Нужно ли при скачивании сохранять ресурс для оффлайна?

```javascript
 function needStoreForOffline(cacheKey) {
      return cacheKey.includes('vendor/') ||
          cacheKey.includes('assets/') ||
          cacheKey.endsWith('jquery.min.js');
  }
 ```
   Нет, в этом нет необходимости. Мы закешировали ресурсы на этапе установки `service-worker`а
   
4. Оказалось, что невозможно обновить статику из директорий vendor и assets. 
   Решение проблемы - исправить `CACHE_VERSION` на 1.0.1 тогда сработает `deleteObsoleteCaches()`.

5. Загружаем страницу, вбиваем заброс и включаем режим offline в chrome dev tools(вкладка Network) вылетает ошибка
[посмотреть](http://prntscr.com/eu0ugc) с id картинкой). При такой ошибке запишем в массив адрес гифки и закешируем когда появится сеть. Смотрим вкладку Application. Картинка попадает в базу данных [посмотреть](http://prntscr.com/eu0xro). Проверяем. Да это ee id.
Но, к сожалению, не попадает в кэш.

